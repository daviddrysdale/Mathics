
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adding builtin symbols &#8212; Mathics 1.1.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Calling Mathics library from within Python code" href="calling-mathics-library-from-within-python-code.html" />
    <link rel="prev" title="Welcome to Mathics’s developer documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="adding-builtin-symbols">
<h1>Adding builtin symbols<a class="headerlink" href="#adding-builtin-symbols" title="Permalink to this headline">¶</a></h1>
<p>Adding new built-in symbols to Mathics is very easy. Either place a new module
in the builtin directory and add it to the list of modules in
<code class="docutils literal notranslate"><span class="pre">builtin/__init__.py</span></code> or use an existing module. Create a new class derived
from <code class="docutils literal notranslate"><span class="pre">Builtin</span></code>.</p>
<p>To get an idea of how a built-in class can look like, consider the following
implementation of <code class="docutils literal notranslate"><span class="pre">Hello</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_]&quot;</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The class starts with a Python docstring that specifies the documentation and
tests for the symbol.  Please refer to <a class="reference internal" href="#documentation-markup">Documentation markup</a> for more
details on how to write the documentation.</p>
<p>Python functions starting with “apply” are converted to built-in rules. Their
docstring is compiled to the corresponding Mathics pattern. Pattern variables
used in the pattern are passed to the Python function by their same name, plus
an additional evaluation object. This object is needed to evaluate further
expressions, print messages in the Python code, etc. Unsurprisingly, the return
value of the Python function is the expression that is replaced for the matched
pattern. If the function does not return any value, the Mathics expression is
left unchanged. Note that you have to return <code class="docutils literal notranslate"><span class="pre">Symbol[&quot;Null&quot;]</span></code> explicitly if
you want that.</p>
<div class="section" id="working-with-multiple-patterns">
<h2>Working with multiple patterns<a class="headerlink" href="#working-with-multiple-patterns" title="Permalink to this headline">¶</a></h2>
<p>It’s important to note that a builtin can be defined over <em>more than one
pattern</em>, such as in the following case:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span><span class="p">,</span> <span class="n">String</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_, language_]&quot;</span>

    <span class="k">if</span> <span class="n">language</span><span class="o">.</span><span class="n">has_form</span><span class="p">(</span><span class="s2">&quot;French&quot;</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bonjour, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">apply_english</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_]&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">Expression</span><span class="p">(</span><span class="s2">&quot;English&quot;</span><span class="p">),</span> <span class="n">evaluation</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">Hello[&quot;Peter&quot;,</span> <span class="pre">French]</span></code> will resolve to <code class="docutils literal notranslate"><span class="pre">&quot;Bonjour,</span>
<span class="pre">Peter!&quot;</span></code>, while <code class="docutils literal notranslate"><span class="pre">Pymathics`Hello[&quot;Peter&quot;,</span> <span class="pre">English]</span></code> and
<code class="docutils literal notranslate"><span class="pre">Pymathics`Hello[&quot;Peter&quot;]</span></code> will both resolve to <code class="docutils literal notranslate"><span class="pre">&quot;Hello,</span> <span class="pre">Peter!&quot;</span></code>.</p>
<p>We may also want to use different definitions according to the types of the
arguments passed to a builtin. We can do so by specifying type-constraints in
the definitions’s pattern, such as in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_String]&quot;</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When evaluating a call to a builtin, Mathics will pattern-match on the inputs
and search for the most appropriate definition. If the inputs don’t match any
of the patterns of the existing definitions then the entire expression is
returned unchanged. For example, if we implemented <code class="docutils literal notranslate"><span class="pre">Hello</span></code> as above then
<code class="docutils literal notranslate"><span class="pre">Hello[45]</span></code> would resolve to <code class="docutils literal notranslate"><span class="pre">Hello[45]</span></code>, because <code class="docutils literal notranslate"><span class="pre">45</span></code> doesn’t match
<code class="docutils literal notranslate"><span class="pre">person_String</span></code> (<code class="docutils literal notranslate"><span class="pre">45</span></code> is not a string).</p>
</div>
<div class="section" id="rules">
<h2>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h2>
<p>Let’s recall the example given in <a class="reference internal" href="#working-with-multiple-patterns">Working with multiple patterns</a>. Notice
that <code class="docutils literal notranslate"><span class="pre">English</span></code> is essentially the default value of the <code class="docutils literal notranslate"><span class="pre">language</span></code>. We
don’t actually need to use multiple definitions to encode parameters with
default values. By adding an entry to the builtin’s <code class="docutils literal notranslate"><span class="pre">rules</span></code> class-field, we
can tell Mathics that an expression should resolve the value of a different
expression, such as in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span><span class="p">,</span> <span class="n">String</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Hello[person_]&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello[person, English]&quot;</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_, language_]&quot;</span>

    <span class="k">if</span> <span class="n">language</span><span class="o">.</span><span class="n">has_form</span><span class="p">(</span><span class="s2">&quot;French&quot;</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bonjour, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, the first entry in <code class="docutils literal notranslate"><span class="pre">rules</span></code> tells Mathics that
<code class="docutils literal notranslate"><span class="pre">Hello[person]</span></code> is just sintactic suger for <code class="docutils literal notranslate"><span class="pre">Hello[person,</span> <span class="pre">English]</span></code>.</p>
</div>
<div class="section" id="special-attributes">
<h2>Special attributes<a class="headerlink" href="#special-attributes" title="Permalink to this headline">¶</a></h2>
<p>One can specify general attributes of a builtin in it’s <code class="docutils literal notranslate"><span class="pre">attributes</span></code>
class field. For example, let’s say you expect <code class="docutils literal notranslate"><span class="pre">Hello[{&quot;Peter&quot;,</span>
<span class="pre">&quot;Roger&quot;}]</span></code> to evaluate to the same as <code class="docutils literal notranslate"><span class="pre">{Hello[&quot;Peter&quot;],</span>
<span class="pre">Hello[&quot;Roger&quot;]}</span></code>. We can to that by overwriting <code class="docutils literal notranslate"><span class="pre">Hello</span></code>’s
<code class="docutils literal notranslate"><span class="pre">attributes</span></code> class-field.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span><span class="p">,</span> <span class="n">String</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">attributes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Listable&#39;</span><span class="p">,)</span>

  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_]&quot;</span>

    <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="emitting-warnings">
<h2>Emitting warnings<a class="headerlink" href="#emitting-warnings" title="Permalink to this headline">¶</a></h2>
<p>Sometimes things go wrong. When things go wrong, we should report an error to
our users. But how can one emit a warning from inside an evaluator?</p>
<p>Warnings in Mathics can be specified via the <code class="docutils literal notranslate"><span class="pre">messages</span></code> class field. The
<code class="docutils literal notranslate"><span class="pre">messages</span></code> class field is a dictionary whose keys are the names of possible
warning messages and whose values are template warning messages. For example,
we may want to display a warning when our users pass something other than a
string to <code class="docutils literal notranslate"><span class="pre">Hello</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathics.builtin.base</span> <span class="kn">import</span> <span class="n">Builtin</span><span class="p">,</span> <span class="n">String</span>

<span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Builtin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  &lt;dl&gt;</span>
<span class="sd">    &lt;dt&gt;Hello[$person$]</span>
<span class="sd">    &lt;dd&gt;An example function in a Python-importable Mathics module.</span>
<span class="sd">  &lt;/dl&gt;</span>
<span class="sd">  &gt;&gt; Hello[&quot;World&quot;]</span>
<span class="sd">   = Hello, World!</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;nstr&#39;</span><span class="p">:</span> <span class="s1">&#39;`1` is not a string&#39;</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">):</span>
    <span class="s2">&quot;Hello[person_]&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">person</span><span class="o">.</span><span class="n">has_form</span><span class="p">(</span><span class="s1">&#39;String&#39;</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">evaluation</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="s1">&#39;nstr&#39;</span><span class="p">,</span> <span class="n">person</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_string_value</span><span class="p">()</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, calling <code class="docutils literal notranslate"><span class="pre">Hello[45]</span></code> will emit the warning <code class="docutils literal notranslate"><span class="pre">nstr:</span> <span class="pre">45</span>
<span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">string</span></code>.</p>
</div>
</div>
<div class="section" id="documentation-markup">
<h1>Documentation markup<a class="headerlink" href="#documentation-markup" title="Permalink to this headline">¶</a></h1>
<p>There is a lot of special markup syntax you can use in the
documentation. It is kind of a mixture of XML, LaTeX, Python doctest,
and custom markup.</p>
<p>The following commands can be used to specify test cases.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span> <span class="pre">$que</span>
<span class="pre">ry$</span></code></p></td>
<td><p>a test query.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:</span> <span class="pre">$mess</span>
<span class="pre">age$</span></code></p></td>
<td><p>a message in the result of the test query.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\|</span> <span class="pre">$pri</span>
<span class="pre">nt$</span></code></p></td>
<td><p>a printed line in the result of the test query.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">=</span> <span class="pre">$resu</span>
<span class="pre">lt$</span></code></p></td>
<td><p>the actual result of the test query.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">$newl</span>
<span class="pre">ine$</span></code></p></td>
<td><p>a newline in the test result.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$$ident</span>
<span class="pre">ifier$$</span></code></p></td>
<td><p>a variable identifier in Mathics code or in text.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#&gt;</span> <span class="pre">$que</span>
<span class="pre">ry$</span></code></p></td>
<td><p>a test query that is not shown in the documentation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X&gt;</span></code></p></td>
<td><p>a test query that is shown in the documentation but is not
ran.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">S&gt;</span></code></p></td>
<td><p>a test query that is shown in the documentation but is only
ran if the <code class="docutils literal notranslate"><span class="pre">SANDBOX</span></code> environment variable is not set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-Graphi</span>
<span class="pre">cs-</span></code></p></td>
<td><p>graphics in the test result.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">...</span></code></p></td>
<td><p>a part of the test result which is not checked in the test,
e.g., for randomized or system-dependent output.</p></td>
</tr>
</tbody>
</table>
<p>The following commands can be used to markup documentation text.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">$comment$</span></code></p></td>
<td><p>a comment line that is not shown in the
documentation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;dl&gt;$list$&lt;/dl&gt;</span></code></p></td>
<td><p>a definition list with <code class="docutils literal notranslate"><span class="pre">&lt;dt&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&lt;dd&gt;</span></code> entries.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;dt&gt;$title$</span></code></p></td>
<td><p>the title of a description item.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;dd&gt;$description$</span></code></p></td>
<td><p>the description of a description item.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;$list$&lt;/ul&gt;</span></code></p></td>
<td><p>an unordered list with <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>
entries.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;ol&gt;$list$&lt;/ol&gt;</span></code></p></td>
<td><p>an ordered list with <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code> entries.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;li&gt;$item$</span></code></p></td>
<td><p>an item of an unordered or ordered
list.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'$code$'</span></code></p></td>
<td><p>inline Mathics code or other code.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;console&gt;$text$&lt;/console&gt;</span></code></p></td>
<td><p>a console (shell/bash/Terminal)
transcript in its own paragraph.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;con&gt;$text$&lt;/con&gt;</span></code></p></td>
<td><p>an inline console transcript.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;em&gt;$text$&lt;/em&gt;</span></code></p></td>
<td><p>emphasized (italic) text.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;i&gt;$text$&lt;/i&gt;</span></code></p></td>
<td><p>the same as <code class="docutils literal notranslate"><span class="pre">&lt;em&gt;</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;url&gt;$url$&lt;/url&gt;</span></code></p></td>
<td><p>a URL.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;img</span> <span class="pre">src=&quot;$src$&quot;</span> <span class="pre">title=&quot;$title</span>
<span class="pre">$&quot;</span> <span class="pre">label=&quot;$label$&quot;&gt;</span></code></p></td>
<td><p>an image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;imgpng</span> <span class="pre">src=&quot;$src$&quot;</span> <span class="pre">title=&quot;$ti</span>
<span class="pre">tle$&quot;</span> <span class="pre">label=&quot;$label$&quot;&gt;</span></code></p></td>
<td><p>the same as <code class="docutils literal notranslate"><span class="pre">img</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;ref</span> <span class="pre">label=&quot;$label$&quot;&gt;</span></code></p></td>
<td><p>a reference to an image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\skip</span></code></p></td>
<td><p>a vertical skip.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\LaTeX</span></code>, <code class="docutils literal notranslate"><span class="pre">\Mathematica</span></code>,
<code class="docutils literal notranslate"><span class="pre">\Mathics</span></code></p></td>
<td><p>special product and company names.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\'</span></code></p></td>
<td><p>a single <code class="docutils literal notranslate"><span class="pre">'</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>To include images in the documentation, use the <code class="docutils literal notranslate"><span class="pre">img</span></code> tag, place an
EPS file <code class="docutils literal notranslate"><span class="pre">$sc$.eps</span></code> in <code class="docutils literal notranslate"><span class="pre">documentation/images</span></code> and run <code class="docutils literal notranslate"><span class="pre">images.sh</span></code>
in the <code class="docutils literal notranslate"><span class="pre">doc</span></code> directory.</p>
</div>
<div class="section" id="documentation-and-tests">
<h1>Documentation and tests<a class="headerlink" href="#documentation-and-tests" title="Permalink to this headline">¶</a></h1>
<p>One of the greatest features of Mathics is its integrated documentation
and test system. Tests can be included right in the code as Python
docstrings. All desired functionality should be covered by these tests
to ensure that changes to the code don’t break it. Execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python test.py
</pre></div>
</div>
<p>to run all tests.</p>
<p>During a test run, the results of tests can be stored for the
documentation, both in MathML and LaTeX form, by executing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python test.py -o
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">doc</span>
</pre></div>
</div>
<p>The XML version of the documentation, which can be accessed in the Web
interface, is updated immediately. To produce the LaTeX documentation
file, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python test.py -t
</pre></div>
</div>
<p>You can then create the PDF using LaTeX. All required steps can be
executed by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make latex
</pre></div>
</div>
<p>in the <code class="docutils literal notranslate"><span class="pre">doc/tex</span></code> directory, which uses <code class="docutils literal notranslate"><span class="pre">latexmk</span></code> to build the LaTeX
document. You just have to adjust the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and <code class="docutils literal notranslate"><span class="pre">latexmkrc</span></code> to
your environment. You need the Asymptote (version 2 at least) to
generate the graphics in the documentation.</p>
<p>You can also run the tests for individual built-in symbols using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python test.py -s [name]
</pre></div>
</div>
<p>This will not re-create the corresponding documentation results,
however. You have to run a complete test to do that.</p>
<p>The following packages are required to build the PDF documentation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-font-utils</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latexmk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-xetex</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lmodern</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inkscape</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-latex-extra</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-latex</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-fonts-recommended</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asymptote</span></code></p></li>
</ul>
<p>Those can be installed in Debian-based system with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt-get install texlive-font-utils latexmk texlive-xetex lmodern inkscape texlive-latex-extra texlive-latex texlive-fonts-recommended asymptote
</pre></div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Mathics</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adding builtin symbols</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#working-with-multiple-patterns">Working with multiple patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rules">Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#special-attributes">Special attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emitting-warnings">Emitting warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#documentation-markup">Documentation markup</a></li>
<li class="toctree-l1"><a class="reference internal" href="#documentation-and-tests">Documentation and tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="calling-mathics-library-from-within-python-code.html">Calling Mathics library from within Python code</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to Mathics’s developer documentation!</a></li>
      <li>Next: <a href="calling-mathics-library-from-within-python-code.html" title="next chapter">Calling Mathics library from within Python code</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, The Mathics Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/builtins.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>